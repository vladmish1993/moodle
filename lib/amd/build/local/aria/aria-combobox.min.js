define("core/local/aria/aria-combobox",["exports","core/key_codes"],(function(_exports,_key_codes){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.comboBox=void 0;_exports.comboBox=comboInput=>{registerEventListeners(comboInput)};const registerEventListeners=comboInput=>{document.addEventListener("keydown",(e=>{if(e.target===comboInput){let next=null;const comboResultArea=document.querySelector('[data-region="search-result-items-container"]'),resultRows=Array.from(comboResultArea.querySelectorAll('[role="row"]')),resultCells=Array.from(comboResultArea.querySelectorAll('[role="gridcell"]')),activeResultRow=comboResultArea.querySelector('.active[role="row"]'),activeResultCell=comboResultArea.querySelector('.focused-cell[role="gridcell"]');switch(e.keyCode){case _key_codes.arrowUp:if(null===activeResultRow)next=setFirstActiveRow(next,resultRows,comboInput,resultRows.length-1);else for(let i=0;i<resultRows.length;i++)if(resultRows[i].id===activeResultRow.id){next=resultRows[i-1];break}break;case _key_codes.arrowDown:if(null===activeResultRow)next=setFirstActiveRow(next,resultRows,comboInput,0);else for(let i=0;i<resultRows.length-1;i++)if(resultRows[i].id===activeResultRow.id){next=resultRows[i+1];break}break;case _key_codes.home:next=resultRows[0];break;case _key_codes.end:next=resultRows[resultRows.length-1];break;case _key_codes.enter||_key_codes.space:window.location=activeResultCell.href;break;case _key_codes.arrowLeft:if(null===activeResultRow)next=setFirstActiveRow(next,resultRows,comboInput,0);else for(let i=0;i<resultCells.length;i++)if(resultCells[i].id===activeResultCell.id){if(void 0===resultCells[i-1]){resultCells[i].classList.remove("focused-cell"),resultCells[resultCells.length-1].classList.add("focused-cell");break}resultCells[i].classList.remove("focused-cell"),resultCells[i-1].classList.add("focused-cell");break}break;case _key_codes.arrowRight:if(null===activeResultRow)next=setFirstActiveRow(next,resultRows,comboInput,0);else for(let i=0;i<resultCells.length-1;i++){if(resultCells[i].id===activeResultCell.id){resultCells[i].classList.remove("focused-cell"),resultCells[i+1].classList.add("focused-cell");break}if(void 0===resultCells[i+2]){resultCells[i+1].classList.remove("focused-cell"),resultCells[0].classList.add("focused-cell");break}}break;default:window.console.log("nothing to see here!")}nextHandler(next,e,activeResultRow,comboInput)}}))},setFirstActiveRow=(next,resultRows,comboInput,val)=>((next=resultRows[val]).setAttribute("aria-selected","true"),next.classList.add("active"),comboInput.setAttribute("aria-activedescendant",next.id),next.querySelector(".result-cell").classList.add("focused-cell"),next),nextHandler=(next,e,activeResultRow,comboInput)=>{next&&(e.preventDefault(),null!==activeResultRow&&(activeResultRow.classList.remove("active"),activeResultRow.querySelector(".result-cell").classList.remove("focused-cell")),next.classList.add("active"),next.querySelector(".result-cell").classList.add("focused-cell"),comboInput.setAttribute("aria-activedescendant",next.id))}}));

//# sourceMappingURL=aria-combobox.min.js.map